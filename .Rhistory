# Pastikan file ini ada di direktori yang sama dengan app.R
dummy_data_path <- "financial_behavior.csv"
# Lokasi file untuk menyimpan respons survei dari pengguna
survey_responses_file <- "survey_responses_data.csv"
# Inisialisasi model ML di awal aplikasi (saat startup)
# Ini adalah cara paling sederhana untuk UAS.
# Untuk aplikasi produksi, model sebaiknya dilatih OFFLINE dan disimpan (saveRDS),
# lalu di-load (readRDS) di sini untuk kinerja yang lebih baik.
financial_ml_model <- NULL # Inisialisasi dengan NULL
df_ml_train_global_levels <- NULL # Untuk menyimpan level faktor dari data training
# Muat data dummy dan latih model saat aplikasi dimulai
tryCatch({
if (!file.exists(dummy_data_path)) {
stop(paste("File dummy data '", dummy_data_path, "' tidak ditemukan. Harap pastikan file ada di direktori kerja yang sama.", sep=""))
}
df_ml_train <- read_csv(dummy_data_path, show_col_types = FALSE)
# Pastikan kolom classification adalah faktor
df_ml_train$classification <- as.factor(df_ml_train$classification)
# Simpan level faktor dari data training global
# Ini penting untuk memastikan input user memiliki level faktor yang sama saat prediksi
df_ml_train_global_levels <- lapply(df_ml_train, levels)
# Fitur yang akan digunakan untuk pelatihan model
# Pastikan nama kolom di sini sama persis dengan nama input di UI Survei
features_for_ml <- c(
'income', 'expense', 'debt', 'saving', 'shoppingFreq',
'investment', 'investmentType', 'investmentRisk', 'payment',
'savingRate', 'shoppingCat', 'insurance', 'recordExpense', 'priority'
)
# Periksa apakah semua fitur ada di df_ml_train
if (!all(features_for_ml %in% names(df_ml_train))) {
missing_features <- setdiff(features_for_ml, names(df_ml_train))
stop(paste("Fitur yang hilang dalam data training ML:", paste(missing_features, collapse = ", ")))
}
# Latih model Random Forest
set.seed(123) # Untuk reproduktibilitas hasil
financial_ml_model <- randomForest(
as.formula(paste("classification ~", paste(features_for_ml, collapse = " + "))),
data = df_ml_train,
ntree = 500, # Jumlah pohon dalam forest
importance = TRUE # Menghitung pentingnya variabel
)
message("Model Random Forest berhasil dilatih saat startup aplikasi.")
}, error = function(e) {
stop(paste("ERROR saat menyiapkan model ML:", e$message, "\nPastikan '", dummy_data_path, "' ada dan berisi data yang benar.", sep=""))
})
#library
library(shiny)
library(shinydashboard)
library(shinyWidgets)
library(tidyverse)
library(randomForest)
library(scales)
# --- 2. Global Setup: ML Model Training & Data Paths ---
# Lokasi file data dummy untuk pelatihan ML
# Pastikan file ini ada di direktori yang sama dengan app.R
dummy_data_path <- "financial_behavior.csv"
# Lokasi file untuk menyimpan respons survei dari pengguna
survey_responses_file <- "survey_responses_data.csv"
# Inisialisasi model ML di awal aplikasi (saat startup)
# Ini adalah cara paling sederhana untuk UAS.
# Untuk aplikasi produksi, model sebaiknya dilatih OFFLINE dan disimpan (saveRDS),
# lalu di-load (readRDS) di sini untuk kinerja yang lebih baik.
financial_ml_model <- NULL # Inisialisasi dengan NULL
df_ml_train_global_levels <- NULL # Untuk menyimpan level faktor dari data training
# Muat data dummy dan latih model saat aplikasi dimulai
tryCatch({
if (!file.exists(dummy_data_path)) {
stop(paste("File dummy data '", dummy_data_path, "' tidak ditemukan. Harap pastikan file ada di direktori kerja yang sama.", sep=""))
}
df_ml_train <- read_csv(dummy_data_path, show_col_types = FALSE)
# Pastikan kolom classification adalah faktor
df_ml_train$classification <- as.factor(df_ml_train$classification)
# Simpan level faktor dari data training global
# Ini penting untuk memastikan input user memiliki level faktor yang sama saat prediksi
df_ml_train_global_levels <- lapply(df_ml_train, levels)
# Fitur yang akan digunakan untuk pelatihan model
# Pastikan nama kolom di sini sama persis dengan nama input di UI Survei
features_for_ml <- c(
'income', 'expense', 'debt', 'saving', 'shoppingFreq',
'investment', 'investmentType', 'investmentRisk', 'payment',
'savingRate', 'shoppingCat', 'insurance', 'recordExpense', 'priority'
)
# Periksa apakah semua fitur ada di df_ml_train
if (!all(features_for_ml %in% names(df_ml_train))) {
missing_features <- setdiff(features_for_ml, names(df_ml_train))
stop(paste("Fitur yang hilang dalam data training ML:", paste(missing_features, collapse = ", ")))
}
# Latih model Random Forest
set.seed(123) # Untuk reproduktibilitas hasil
financial_ml_model <- randomForest(
as.formula(paste("classification ~", paste(features_for_ml, collapse = " + "))),
data = df_ml_train,
ntree = 500, # Jumlah pohon dalam forest
importance = TRUE # Menghitung pentingnya variabel
)
message("Model Random Forest berhasil dilatih saat startup aplikasi.")
}, error = function(e) {
stop(paste("ERROR saat menyiapkan model ML:", e$message, "\nPastikan '", dummy_data_path, "' ada dan berisi data yang benar.", sep=""))
})
# --- 3. User Interface (UI) ---
ui <- navbarPage(
id = "navbar", # ID untuk navigasi antar tab
title = "MBSA - Market Bank Survey Analysis",
# --- Tab 1: Home Page ---
tabPanel("Home",
fluidPage(
h1("Selamat Datang di MBSA
q()
install.packages('rsconnect')
library(rsconnect)
rsconnect::setAccountInfo(name='mbsa',
token='CB5B2DD488219051F165275DE49814C6',
secret='BWDGzxV12iIkcTU8jx23W3TR0wtWLOrZuathid8Y')
library(rsconnect)
rsconnect::deployApp('C:\Users\HP\OneDrive\Documents\FARREL RIO LUCKY RACHMADI\UPNVJ\INFORMATION SCIENCE\SMT 4\Sains Data Mahadata\TA\data\app.R')
library(rsconnect)
> rsconnect::deployApp('C:/Users/HP/OneDrive/Documents/FARREL RIO LUCKY RACHMADI/UPNVJ/INFORMATION SCIENCE/SMT 4/Sains Data Mahadata/TA/data/app.R')
rsconnect::deployApp('C:/Users/HP/OneDrive/Documents/FARREL RIO LUCKY RACHMADI/UPNVJ/INFORMATION SCIENCE/SMT 4/Sains Data Mahadata/TA/data')
library(rsconnect)
rsconnect::deployApp('C:/Users/HP/OneDrive/Documents/FARREL RIO LUCKY RACHMADI/UPNVJ/INFORMATION SCIENCE/SMT 4/Sains Data Mahadata/TA/data/app')
rsconnect::setAccountInfo(name='mbsa',
token='CB5B2DD488219051F165275DE49814C6',
secret='BWDGzxV12iIkcTU8jx23W3TR0wtWLOrZuathid8Y')
rsconnect::deployApp("C:/Users/HP/OneDrive/Documents/FARREL RIO LUCKY RACHMADI/UPNVJ/INFORMATION SCIENCE/SMT 4/Sains Data Mahadata/TA/data")
library(rsconnect)
rsconnect::deployApp('C:\Users\HP\OneDrive\Documents\MBSA_PROJECT')
library(rsconnect)
rsconnect::deployApp('C:/Users/HP/OneDrive/Documents/MBSA_PROJECT')
shiny::runApp('MBSA_PROJECT')
runApp('MBSA_PROJECT')
shiny::runApp('MBSA_PROJECT')
runApp('MBSA_PROJECT')
runApp('MBSA_PROJECT')
shiny::runApp('MBSA_PROJECT')
runApp('MBSA_PROJECT')
runApp('MBSA_PROJECT')
shiny::runApp('MBSA_PROJECT')
shiny::runApp('MBSA_PROJECT')
install.packages("corrplot")
install.packages("corrplot")
C:\Program Files\R\R-4.3.1
shiny::runApp('FARREL RIO LUCKY RACHMADI/UPNVJ/INFORMATION SCIENCE/SMT 4/Sains Data Mahadata/MBSA_PROJECT')
